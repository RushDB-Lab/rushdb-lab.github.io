/* ==========================================================================
   Theme Tokens - Single Source of Truth for Dark/Light Themes
   ========================================================================== */

/* --- Semantic Tokens: Dark (default) --- */
:root,
:root[data-theme="dark"] {
  --theme-bg-primary: #050712;
  --theme-bg-secondary: rgba(8, 12, 28, 0.85);
  --theme-bg-card: rgba(12, 17, 42, 0.72);

  --theme-text-primary: rgba(234, 242, 255, 0.95);
  --theme-text-secondary: rgba(234, 242, 255, 0.72);
  --theme-text-muted: rgba(234, 242, 255, 0.50);

  --theme-accent-1: #22d3ee;
  --theme-accent-2: #a855f7;
  --theme-accent-3: #60a5fa;

  --theme-border: rgba(234, 242, 255, 0.14);
  --theme-line-soft: rgba(240, 246, 255, 0.08);

  --theme-shadow-1: 0 18px 60px rgba(0, 0, 0, 0.45);
  --theme-shadow-2: 0 28px 110px rgba(0, 0, 0, 0.55);
  --theme-shadow-card: 0 12px 44px rgba(0, 0, 0, 0.46);

  --theme-surface-1: rgba(10, 14, 32, 0.72);
  --theme-surface-2: rgba(12, 18, 44, 0.64);

  /* Navigation */
  --theme-nav-bg: rgba(5, 7, 18, 0.72);
  --theme-nav-bg-scrolled: rgba(5, 7, 18, 0.88);
  --theme-nav-border: rgba(240, 246, 255, 0.08);

  /* Neon glows (dark-only, suppressed in light) */
  --theme-glow-cyan: 0 0 20px rgba(34, 211, 238, 0.4), 0 0 40px rgba(34, 211, 238, 0.2);
  --theme-glow-purple: 0 0 20px rgba(168, 85, 247, 0.4), 0 0 40px rgba(168, 85, 247, 0.2);
  --theme-glow-pink: 0 0 20px rgba(236, 72, 153, 0.4), 0 0 40px rgba(236, 72, 153, 0.2);

  /* Body overlays opacity */
  --theme-overlay-before-opacity: 0.9;
  --theme-overlay-after-opacity: 0.55;

  /* Mobile menu */
  --theme-mobile-menu-bg: rgba(8, 12, 28, 0.95);

  /* Syntax highlighting */
  --theme-syntax-keyword: #a855f7;
  --theme-syntax-function: #22d3ee;
  --theme-syntax-string: #34d399;
  --theme-syntax-number: #fbbf24;
  --theme-syntax-comment: #6b7280;
  --theme-syntax-operator: #f472b6;
  --theme-syntax-variable: #60a5fa;
}

/* --- Semantic Tokens: Light (warm cream) --- */
:root[data-theme="light"] {
  --theme-bg-primary: #fdf6e3;
  --theme-bg-secondary: rgba(250, 240, 218, 0.88);
  --theme-bg-card: rgba(253, 248, 235, 0.92);

  --theme-text-primary: rgba(41, 37, 28, 0.96);
  --theme-text-secondary: rgba(68, 63, 50, 0.78);
  --theme-text-muted: rgba(101, 95, 78, 0.58);

  --theme-accent-1: #0e7490;
  --theme-accent-2: #7c3aed;
  --theme-accent-3: #1d4ed8;

  --theme-border: rgba(41, 37, 28, 0.12);
  --theme-line-soft: rgba(41, 37, 28, 0.06);

  --theme-shadow-1: 0 12px 34px rgba(41, 37, 28, 0.10);
  --theme-shadow-2: 0 24px 70px rgba(41, 37, 28, 0.14);
  --theme-shadow-card: 0 4px 16px rgba(41, 37, 28, 0.08);

  --theme-surface-1: rgba(253, 248, 235, 0.92);
  --theme-surface-2: rgba(250, 240, 218, 0.82);

  /* Navigation */
  --theme-nav-bg: rgba(253, 246, 227, 0.82);
  --theme-nav-bg-scrolled: rgba(253, 246, 227, 0.96);
  --theme-nav-border: rgba(41, 37, 28, 0.08);

  /* Glows replaced with subtle warm shadows in light mode */
  --theme-glow-cyan: 0 2px 12px rgba(14, 116, 144, 0.15);
  --theme-glow-purple: 0 2px 12px rgba(124, 58, 237, 0.15);
  --theme-glow-pink: 0 2px 12px rgba(219, 39, 119, 0.12);

  /* Body overlays suppressed */
  --theme-overlay-before-opacity: 0;
  --theme-overlay-after-opacity: 0;

  /* Mobile menu */
  --theme-mobile-menu-bg: rgba(253, 246, 227, 0.96);

  /* Syntax highlighting - warm tones for cream bg */
  --theme-syntax-keyword: #7c3aed;
  --theme-syntax-function: #0e7490;
  --theme-syntax-string: #0f766e;
  --theme-syntax-number: #b45309;
  --theme-syntax-comment: #78716c;
  --theme-syntax-operator: #db2777;
  --theme-syntax-variable: #1d4ed8;
}

/* ==========================================================================
   Bridge Layer: Map theme tokens to both naming conventions
   ========================================================================== */
:root {
  /* --- Generic naming (--bg-primary, --text-primary, etc.) --- */
  --bg-primary: var(--theme-bg-primary);
  --bg-secondary: var(--theme-bg-secondary);
  --bg-card: var(--theme-bg-card);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --text-muted: var(--theme-text-muted);
  --accent-primary: var(--theme-accent-1);
  --accent-secondary: var(--theme-accent-2);
  --accent-gradient: linear-gradient(
    135deg,
    var(--theme-accent-1) 0%,
    var(--theme-accent-2) 55%,
    var(--theme-accent-3) 100%
  );
  --border-color: var(--theme-border);
  --shadow: var(--theme-shadow-1);
  --shadow-lg: var(--theme-shadow-2);

  /* --- Shorthand naming (--bg, --text, --c1, etc.) --- */
  --bg: var(--theme-bg-primary);
  --surface: var(--theme-surface-1);
  --surface-2: var(--theme-surface-2);
  --text: var(--theme-text-primary);
  --text-2: var(--theme-text-secondary);
  --text-3: var(--theme-text-muted);
  --line: var(--theme-border);
  --line-2: var(--theme-line-soft);
  --c1: var(--theme-accent-1);
  --c2: var(--theme-accent-2);
  --c3: var(--theme-accent-3);
  --grad: linear-gradient(135deg, var(--c1) 0%, var(--c2) 55%, var(--c3) 100%);
  --shadow-2: var(--theme-shadow-card);

  /* --- Neon --- */
  --neon-cyan: var(--theme-accent-1);
  --neon-purple: var(--theme-accent-2);
  --neon-pink: #ec4899;
  --neon-blue: var(--theme-accent-3);
  --neon-green: #10b981;

  /* --- Glows --- */
  --glow-cyan: var(--theme-glow-cyan);
  --glow-purple: var(--theme-glow-purple);
  --glow-pink: var(--theme-glow-pink);

  /* --- Syntax --- */
  --syntax-keyword: var(--theme-syntax-keyword);
  --syntax-function: var(--theme-syntax-function);
  --syntax-string: var(--theme-syntax-string);
  --syntax-number: var(--theme-syntax-number);
  --syntax-comment: var(--theme-syntax-comment);
  --syntax-operator: var(--theme-syntax-operator);
  --syntax-variable: var(--theme-syntax-variable);

  /* --- Navigation --- */
  --nav-bg: var(--theme-nav-bg);
  --nav-bg-scrolled: var(--theme-nav-bg-scrolled);
  --nav-border: var(--theme-nav-border);

  /* --- Theme transition --- */
  --theme-transition: 250ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* Light mode neon adjustments */
:root[data-theme="light"] {
  --neon-pink: #db2777;
  --neon-green: #059669;
}

/* ==========================================================================
   FOUC Prevention: Disable transitions during initial theme load
   ========================================================================== */
html.theme-preload *,
html.theme-preload *::before,
html.theme-preload *::after {
  transition: none !important;
}

/* ==========================================================================
   Theme Transition: Smooth color changes on toggle
   ========================================================================== */
html:not(.theme-preload) body,
html:not(.theme-preload) .navbar,
html:not(.theme-preload) .main-content,
html:not(.theme-preload) .member-card,
html:not(.theme-preload) .achievement-item,
html:not(.theme-preload) .project-item,
html:not(.theme-preload) .news-item,
html:not(.theme-preload) .contact-info,
html:not(.theme-preload) .intro-container,
html:not(.theme-preload) .theme-toggle,
html:not(.theme-preload) .language-trigger,
html:not(.theme-preload) .nav-cta,
html:not(.theme-preload) .scroll-progress,
html:not(.theme-preload) .footer,
html:not(.theme-preload) .panel,
html:not(.theme-preload) .section,
html:not(.theme-preload) .metric,
html:not(.theme-preload) .social-link,
html:not(.theme-preload) .lightbox-content,
html:not(.theme-preload) .timeline-event {
  transition:
    background-color var(--theme-transition),
    color var(--theme-transition),
    border-color var(--theme-transition),
    box-shadow var(--theme-transition);
}

/* ==========================================================================
   Theme Toggle Button
   ========================================================================== */
.theme-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid var(--border-color);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  flex-shrink: 0;
}

.theme-toggle:hover {
  color: var(--accent-primary);
  border-color: var(--accent-primary);
  background: rgba(34, 211, 238, 0.08);
}

:root[data-theme="light"] .theme-toggle:hover {
  background: rgba(14, 116, 144, 0.08);
}

.theme-toggle-icon {
  width: 18px;
  height: 18px;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* ==========================================================================
   Light Mode Overrides for Key Components
   ========================================================================== */

/* Body background overlays - hide in light mode */
:root[data-theme="light"] body::before {
  opacity: 0 !important;
}

:root[data-theme="light"] body::after {
  opacity: 0 !important;
}

/* Navbar light adaptation */
:root[data-theme="light"] .navbar {
  background: var(--nav-bg);
  border-bottom-color: var(--nav-border);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

:root[data-theme="light"] .navbar.is-scrolled {
  background: var(--nav-bg-scrolled);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Nav logo text gradient in light */
:root[data-theme="light"] .nav-logo {
  color: var(--c1);
}

/* Nav logo image border */
:root[data-theme="light"] .nav-logo-img {
  border-color: rgba(41, 37, 28, 0.12);
  background: rgba(41, 37, 28, 0.03);
  box-shadow: 0 4px 12px rgba(41, 37, 28, 0.08);
}

/* Nav links hover */
:root[data-theme="light"] .nav-links a:hover {
  background: rgba(41, 37, 28, 0.04);
  border-color: rgba(14, 116, 144, 0.22);
}

/* Nav CTA */
:root[data-theme="light"] .nav-cta {
  background: rgba(14, 116, 144, 0.08);
  border-color: rgba(14, 116, 144, 0.22);
  color: var(--text);
}

/* Language trigger/dropdown */
:root[data-theme="light"] .language-trigger {
  background: rgba(41, 37, 28, 0.04);
  border-color: rgba(41, 37, 28, 0.10);
}

:root[data-theme="light"] .language-dropdown {
  background: rgba(253, 248, 235, 0.96);
  border-color: rgba(41, 37, 28, 0.12);
  box-shadow: 0 8px 24px rgba(41, 37, 28, 0.12);
}

:root[data-theme="light"] .lang-btn:hover {
  background: rgba(14, 116, 144, 0.06);
}

/* Nav toggle (mobile hamburger) */
:root[data-theme="light"] .nav-toggle {
  background: rgba(41, 37, 28, 0.04);
  border-color: rgba(41, 37, 28, 0.10);
  color: var(--text-primary);
}

:root[data-theme="light"] .nav-toggle:hover {
  background: rgba(41, 37, 28, 0.08);
  border-color: rgba(14, 116, 144, 0.25);
}

/* Mobile menu */
:root[data-theme="light"] .nav-mobile-menu {
  background: var(--theme-mobile-menu-bg);
  border-color: rgba(41, 37, 28, 0.10);
  box-shadow: 0 12px 32px rgba(41, 37, 28, 0.12);
}

:root[data-theme="light"] .nav-mobile-links a {
  background: rgba(41, 37, 28, 0.02);
  border-color: rgba(41, 37, 28, 0.05);
}

:root[data-theme="light"] .nav-mobile-links a:hover,
:root[data-theme="light"] .nav-mobile-links a.active {
  background: rgba(14, 116, 144, 0.06);
  border-color: rgba(14, 116, 144, 0.18);
}

/* Hero section */
:root[data-theme="light"] .hero-title {
  text-shadow: none;
}

/* Main content container */
:root[data-theme="light"] .main-content {
  background: rgba(253, 248, 235, 0.72);
  border-color: rgba(41, 37, 28, 0.08);
  backdrop-filter: blur(18px);
}

/* Cards - unified light treatment */
:root[data-theme="light"] .member-card,
:root[data-theme="light"] .achievement-item,
:root[data-theme="light"] .project-item,
:root[data-theme="light"] .news-item,
:root[data-theme="light"] .contact-info,
:root[data-theme="light"] .intro-container {
  background: rgba(253, 248, 235, 0.92);
  border-color: rgba(41, 37, 28, 0.08);
  box-shadow: 0 2px 8px rgba(41, 37, 28, 0.04);
  backdrop-filter: none;
}

:root[data-theme="light"] .member-card:hover,
:root[data-theme="light"] .achievement-item:hover,
:root[data-theme="light"] .project-item:hover,
:root[data-theme="light"] .news-item:hover {
  border-color: rgba(14, 116, 144, 0.20);
  box-shadow: 0 8px 24px rgba(41, 37, 28, 0.08);
}

/* Section title underline glow replacement */
:root[data-theme="light"] .section-title::after {
  box-shadow: none;
}

/* Scroll progress */
:root[data-theme="light"] .scroll-progress {
  box-shadow: none;
}

/* CTA button */
:root[data-theme="light"] .cta-button {
  color: #ffffff;
}

/* Footer */
:root[data-theme="light"] .footer {
  background: rgba(41, 37, 28, 0.03);
  border-top-color: rgba(41, 37, 28, 0.08);
}

/* Back to top button */
:root[data-theme="light"] .back-to-top {
  background: rgba(253, 248, 235, 0.92);
  border-color: rgba(41, 37, 28, 0.12);
  color: var(--text-secondary);
  box-shadow: 0 4px 12px rgba(41, 37, 28, 0.08);
}

:root[data-theme="light"] .back-to-top:hover {
  background: rgba(253, 248, 235, 1);
  border-color: var(--accent-primary);
  color: var(--accent-primary);
}

/* Hero info panel */
:root[data-theme="light"] .panel {
  background: rgba(253, 248, 235, 0.95);
  border-color: rgba(41, 37, 28, 0.10);
  box-shadow: 0 4px 16px rgba(41, 37, 28, 0.06);
}

:root[data-theme="light"] .panel::before {
  opacity: 0;
}

:root[data-theme="light"] .panel-metrics {
  border-top-color: rgba(41, 37, 28, 0.08);
}

:root[data-theme="light"] .metric {
  border-color: rgba(41, 37, 28, 0.08);
  background: rgba(41, 37, 28, 0.03);
}

:root[data-theme="light"] .panel-kicker-badge {
  box-shadow: 0 0 8px rgba(14, 116, 144, 0.20);
}

/* Section cards */
:root[data-theme="light"] .section {
  background: rgba(253, 248, 235, 0.88);
  border-color: rgba(41, 37, 28, 0.08);
}

:root[data-theme="light"] .section::before {
  opacity: 0.5;
}

:root[data-theme="light"] .section::after {
  opacity: 0;
}

/* Timeline */
:root[data-theme="light"] .timeline-dot {
  border-color: #fdf6e3;
  box-shadow: 0 0 0 4px rgba(14, 116, 144, 0.12);
}

:root[data-theme="light"] .timeline-event {
  border-color: rgba(41, 37, 28, 0.08);
  background: rgba(41, 37, 28, 0.03);
}

:root[data-theme="light"] .timeline-marker::before,
:root[data-theme="light"] .timeline-marker::after {
  background: rgba(41, 37, 28, 0.12);
}

:root[data-theme="light"] .intro-stats {
  border-top-color: rgba(41, 37, 28, 0.08);
}

/* Member cards (desktop enhanced) */
:root[data-theme="light"] .member-avatar {
  border-color: rgba(41, 37, 28, 0.10);
  background: rgba(41, 37, 28, 0.03);
  box-shadow: 0 4px 12px rgba(41, 37, 28, 0.08);
}

/* Social links */
:root[data-theme="light"] .social-link {
  background: rgba(41, 37, 28, 0.03);
  border-color: rgba(41, 37, 28, 0.08);
}

:root[data-theme="light"] .social-link:hover {
  border-color: rgba(14, 116, 144, 0.22);
  background: rgba(14, 116, 144, 0.04);
}

/* Lightbox */
:root[data-theme="light"] .lightbox-backdrop {
  background: rgba(41, 37, 28, 0.45);
}

:root[data-theme="light"] .lightbox-content {
  background: rgba(253, 248, 235, 0.96);
  border-color: rgba(41, 37, 28, 0.12);
  box-shadow: 0 24px 70px rgba(41, 37, 28, 0.18);
}

:root[data-theme="light"] .lightbox-close {
  background: rgba(253, 248, 235, 0.92);
  color: var(--text-primary);
}

/* Prose code blocks */
:root[data-theme="light"] .prose pre {
  background: rgba(41, 37, 28, 0.04) !important;
  border-color: rgba(41, 37, 28, 0.10);
}

:root[data-theme="light"] .prose pre::before {
  color: #ffffff;
}

:root[data-theme="light"] .prose :not(pre) > code {
  background: rgba(14, 116, 144, 0.08);
  color: var(--c1);
  border-color: rgba(14, 116, 144, 0.16);
}

/* Secondary button */
:root[data-theme="light"] .secondary-button:hover {
  background: rgba(14, 116, 144, 0.06);
  border-color: rgba(14, 116, 144, 0.22);
}

/* Hero title gradient - light mode */
:root[data-theme="light"] .hero-typed {
  background: linear-gradient(
    135deg,
    rgba(41, 37, 28, 0.96) 0%,
    var(--theme-accent-2) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

:root[data-theme="light"] .hero-brand.typing::after,
:root[data-theme="light"] .hero-motto.typing::after,
:root[data-theme="light"] .hero-motto.typing-done::after {
  -webkit-text-fill-color: var(--theme-accent-2);
}

/* Card hover states (desktop enhanced) */
:root[data-theme="light"] .achievement-item:hover,
:root[data-theme="light"] .project-item:hover,
:root[data-theme="light"] .news-item:hover {
  border-color: rgba(14, 116, 144, 0.22);
  box-shadow: 0 8px 24px rgba(41, 37, 28, 0.08);
  background: rgba(253, 248, 235, 0.95);
}

:root[data-theme="light"] .member-card:hover {
  box-shadow: 0 8px 24px rgba(41, 37, 28, 0.08);
}

/* Member card amber accents - light mode uses deeper amber for contrast */
:root[data-theme="light"] .member-card:hover .member-name {
  color: #b45309;
}

:root[data-theme="light"] .detail-value {
  color: #b45309;
}

:root[data-theme="light"] .member-now-at {
  border-color: rgba(180, 83, 9, 0.25);
  background: rgba(245, 158, 11, 0.08);
}

/* Logo container */
:root[data-theme="light"] .logo {
  background: rgba(41, 37, 28, 0.03);
  border-color: rgba(41, 37, 28, 0.08);
  box-shadow: 0 4px 12px rgba(41, 37, 28, 0.06);
}

/* Achievement result color */
:root[data-theme="light"] .achievement-result {
  color: var(--c1);
}

/* Contact QR code images - blend white backgrounds with cream */
:root[data-theme="light"] .contact-wechat-img,
:root[data-theme="light"] .contact-redbook-img {
  mix-blend-mode: multiply;
}
